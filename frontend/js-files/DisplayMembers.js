// Local Variables
let holdA = [];
let holdB = [];
let holdC = [];
let holdD = [];
let holdE = [];
let holdF = [];
let holdG = [];
let holdH = [];
let holdI = [];
let holdJ = [];
let holdK = [];
let holdL = [];
let holdM = [];
let holdN = [];
let holdO = [];
let holdP = [];
let holdQ = [];
let holdR = [];
let holdS = [];
let holdT = [];
let holdU = [];
let holdV = [];
let holdW = [];
let holdX = [];
let holdY = [];
let holdZ = [];

// functions
let allocateNames = (jsonRes) => {
  jsonRes.forEach((element) => {
    let surname = element.surname[0];
    let firstName = element.firstname;
    if (surname === "A") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdA.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdA.push(obj);
      }
    } else if (surname === "B") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdB.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdB.push(obj);
      }
    } else if (surname === "C") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdC.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdC.push(obj);
      }
    } else if (surname === "D") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdD.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdD.push(obj);
      }
    } else if (surname === "E") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdE.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdE.push(obj);
      }
    } else if (surname === "F") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdF.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdF.push(obj);
      }
    } else if (surname === "G") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdG.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdG.push(obj);
      }
    } else if (surname === "H") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdH.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdH.push(obj);
      }
    } else if (surname === "I") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdI.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdI.push(obj);
      }
    } else if (surname === "J") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdJ.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdJ.push(obj);
      }
    } else if (surname === "K") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdK.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdK.push(obj);
      }
    } else if (surname === "L") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdL.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdL.push(obj);
      }
    } else if (surname === "M") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdM.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdM.push(obj);
      }
    } else if (surname === "N") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdN.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdN.push(obj);
      }
    } else if (surname === "O") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdO.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdO.push(obj);
      }
    } else if (surname === "P") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdP.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdP.push(obj);
      }
    } else if (surname === "Q") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdQ.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdQ.push(obj);
      }
    } else if (surname === "R") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdR.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdR.push(obj);
      }
    } else if (surname === "S") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdS.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdS.push(obj);
      }
    } else if (surname === "T") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdT.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdT.push(obj);
      }
    } else if (surname === "U") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdU.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdU.push(obj);
      }
    } else if (surname === "V") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdV.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdV.push(obj);
      }
    } else if (surname === "W") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdW.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdW.push(obj);
      }
    } else if (surname === "X") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdX.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdX.push(obj);
      }
    } else if (surname === "Y") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdY.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdY.push(obj);
      }
    } else if (surname === "Z") {
      if (firstName === "") {
        let obj = {
          surname: element.surname,
          id: element._id,
        };
        holdZ.push(obj);
      } else {
        let obj = {
          firstName: element.firstname,
          surname: element.surname,
          id: element._id,
        };
        holdZ.push(obj);
      }
    }
  });
};

/**
 * function takes in list of a certain last name and first letter of last name and dynamically lists out all of the members
 * @param {List} list
 * @param {String} firstLetter
 */
let createDynamicLinks = (list, firstLetter) => {
  list.forEach((element) => {
    // document.getElementById(
    //   firstLetter
    // ).innerHTML += `<a href="url">${element}</a><br>`;
    // document.getElementById(
    //   firstLetter
    // ).innerHTML += `<button onclick="renderModal('${element}')" id="${element}">${element}</button><br>`;
    let button = document.createElement("button");
    let br = document.createElement("br");
    button.innerHTML = element.surname + ", " + element.firstName;
    button.onclick = () => {
      createModal(element.surname, element.id);
    };
    document.getElementById(firstLetter).appendChild(button);
    document.getElementById(firstLetter).appendChild(br);
  });
};

// #TODO currently here trying to solve issue
let createModal = (surname, id) => {
  url = "https://swj-capstone.herokuapp.com/api/v1/person/byname/" + surname;

  let xhr = new XMLHttpRequest();
  xhr.open("GET", url);

  xhr.setRequestHeader("Accept", "application/json");
  xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      let jsonRes = xhr.responseText;
      console.log(jsonRes);

      jsonRes.forEach((element) => {
        if (element._id == id) {
          let x = element;
          console.log(x);
        }
      });
    }
    //   // display main modal window
    //   $("#person-modal").modal({ backdrop: "static", keyboard: false });
    //   $("#person-modal").modal("show");
    //   // all data is loaded
    //   let jsonRes = xhr.responseText;
    //   // process string received from xhr response into object
    //   jsonRes = JSON.parse(jsonRes);
    //   console.log(typeof jsonRes);
    //   // takes in xhr response, returns array of objects to process
    //   processXhrResponse(jsonRes);
    //   // loops through array of objects and creates a button for each of them on the main modal window
    //   processPersonInfoArray(personInfo);
    //   // creates dynamic modal window for each individual with a button created above
    //   createDynamicModals(personInfo);
    //   // handles manual triggers for each modal window
    //   manualDynamicModalTriggers(personInfo);
    // }
  };
  xhr.send();
};

renderModal = (x) => {};

window.addEventListener("load", () => {
  url = "https://swj-capstone.herokuapp.com/api/v1/person/list";

  let xhr = new XMLHttpRequest();
  xhr.open("GET", url);

  xhr.setRequestHeader("Accept", "application/json");
  xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      // all data is loaded
      let jsonRes = xhr.responseText;

      // process string received from xhr response into object
      jsonRes = JSON.parse(jsonRes);

      allocateNames(jsonRes);
      createDynamicLinks(holdA, "a");
      createDynamicLinks(holdB, "b");
      createDynamicLinks(holdC, "c");
      createDynamicLinks(holdD, "d");
      createDynamicLinks(holdE, "e");
      createDynamicLinks(holdF, "f");
      createDynamicLinks(holdG, "g");
      createDynamicLinks(holdH, "h");
      createDynamicLinks(holdI, "i");
      createDynamicLinks(holdJ, "j");
      createDynamicLinks(holdK, "k");
      createDynamicLinks(holdL, "l");
      createDynamicLinks(holdM, "m");
      createDynamicLinks(holdN, "n");
      createDynamicLinks(holdO, "o");
      createDynamicLinks(holdP, "p");
      createDynamicLinks(holdQ, "q");
      createDynamicLinks(holdR, "r");
      createDynamicLinks(holdS, "s");
      createDynamicLinks(holdT, "t");
      createDynamicLinks(holdU, "u");
      createDynamicLinks(holdV, "v");
      createDynamicLinks(holdW, "w");
      createDynamicLinks(holdX, "x");
      createDynamicLinks(holdY, "y");
      createDynamicLinks(holdZ, "z");
    }
  };
  xhr.send();
});
